@model IEnumerable<TNAI_Proj.Model.Entities.Car>

@{
    ViewData["Title"] = "Manage Cars";
}

<div class="container mt-4">

    <div class="container mt-4">
    <h1 class="mb-4">Manage Cars</h1>
    @if (User.IsInRole("Admin"))
    {
            <a asp-controller="Cars" asp-action="Create" class="btn btn-primary">
            <i class="fas fa-plus me-2"></i>Add New Car
        </a>
    }
    </div>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Dealership</th>
                    <th>Price</th>
                    <th>Status</th>
                    <th>Owner</th>
                    <th>Specifications</th>
                    <th>Edit</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var car in Model)
                {
                    <tr>
                        <td>@car.Id</td>
                        <td>@car.Name</td>
                        <td>@car.Category?.Name</td>
                        <td>@car.Dealership?.Name</td>
                        <td>@car.Price.ToString("C")</td>
                        <td>
                            <span class="badge @(car.IsAvailable ? "bg-success" : "bg-danger")">
                                @(car.IsAvailable ? "Available" : "Sold")
                            </span>
                        </td>
                        <td>
                            @if (car.User != null)
                            {
                                <span class="badge bg-info">@car.User.Name</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary">None</span>
                            }
                        </td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary" type="button" 
                                    data-bs-toggle="collapse" 
                                    data-bs-target="#specs-@car.Id">
                                View Specs
                            </button>
                            <div class="collapse mt-2" id="specs-@car.Id">
                                <div class="card card-body">
                                    <small>
                                        <strong>Year:</strong> @car.Year<br />
                                        <strong>Mileage:</strong> @car.Mileage.ToString("N0") km<br />
                                        <strong>Horsepower:</strong> @car.Horsepower hp<br />
                                        <strong>Torque:</strong> @car.Torque lb-ft<br />
                                        <strong>Top Speed:</strong> @car.TopSpeed mph<br />
                                        <strong>Acceleration:</strong> @car.Acceleration s (0-60)<br />
                                        <strong>Fuel Efficiency:</strong> @car.FuelEfficiency mpg<br />
                                        <strong>Fuel Type:</strong> @car.FuelType<br />
                                        <strong>Transmission:</strong> @car.Transmission
                                    </small>
                                </div>
                            </div>
                        </td>
                        <td>
                            <a asp-controller="Cars" asp-action="Edit" asp-route-id="@car.Id" class="btn btn-outline-warning">
                                <i class="fas fa-edit"></i>
                            </a>
                        </td>
                        <td>
                            <a asp-controller="Cars" asp-action="Delete" asp-route-id="@car.Id" class="btn btn-outline-danger">
                                <i class="fas fa-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div> 